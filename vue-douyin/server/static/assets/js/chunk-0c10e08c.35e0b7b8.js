(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c10e08c"],{"0ebd":function(t,e,i){},1949:function(t,e,i){"use strict";var o=i("273b"),s=i.n(o);s.a},"273b":function(t,e,i){},"4b24":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{"!click":function(e){return t.closeCommentList(e)}}},[i("scroll",{ref:"listWrap",staticClass:"list-wrap",attrs:{data:t.list,pullup:!0},on:{scrollToEnd:t.fetchVideoList}},[i("followed-list",{attrs:{list:t.list},on:{showCommentList:t.fetchCommentsAndShowList}})],1),i("transition",{attrs:{name:"up"}},[t.showCommentList?i("comment-list",{attrs:{commentList:t.commentList,commentNum:t.commentNum,currentCommentVideoId:t.currentCommentVideoId},on:{close:t.closeCommentList,scrollToEnd:t.fetchCommentsAndShowList}}):t._e()],1)],1)},s=[],n=(i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("bd86")),a=i("e9fc"),c=i("ed17"),r=i("2ce0"),d=i("2f62"),l=i("8b55");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var f={created:function(){this.fetchVideoList()},activated:function(){!1===this.isFirst&&0!==this.followedNewsNum&&(this.videoPage=0,this.videoIsEnd=!1,this.list=[],this.fetchVideoList()),this.isFirst=!1},data:function(){return{isFirst:!0,showCommentList:!1,commentNum:0,commentList:[],videoPage:0,page:0,currentCommentVideoId:"",isEnd:!1,videoIsEnd:!1,list:[]}},computed:m({},Object(d["c"])(["loginInfo","followedNewsNum"])),methods:m({fetchCommentsAndShowList:function(t,e){var i=this;if(this.currentCommentVideoId!==t)this.isEnd=!1,this.page=1,this.currentCommentVideoId=t,this.commentNum=e,this.$axios.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page)).then((function(t){t.data.data.length<21&&(i.isEnd=!0),i.commentList=Object(l["b"])(t.data.data),i.showCommentList=!0}));else{if(this.page++,this.isEnd)return;this.$axios.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page)).then((function(t){t.data.data.length<21&&(i.isEnd=!0),i.commentList=Object(l["b"])(i.commentList.concat(t.data.data)),i.showCommentList=!0}))}},fetchVideoList:function(){var t=this;if(!this.videoIsEnd){var e=this.loginInfo.userId;this.videoPage++,this.$axios.get("/api/user/".concat(e,"/FollowerVideo/page/").concat(this.videoPage)).then((function(e){e.data.data.length<21&&(t.videoIsEnd=!0),t.list=t.list.concat(e.data.data)}))}},closeCommentList:function(t){this.showCommentList&&("VIDEO"===t.target.nodeName||t.target.className.includes("icon-close")||t.target.className.includes("followed-item"))&&(this.currentCommentVideoId="",t.stopPropagation(),this.showCommentList=!1)}},Object(d["d"])(["SET_FOLLOWEDNEWSNUM"])),beforeRouteLeave:function(t,e,i){var o=this;this.followedNewsNum>0?this.$axios.get("/api/user/".concat(this.loginInfo.userId,"/watchAllFollowedNewVideo")).then((function(t){200===t.data.code&&(o.SET_FOLLOWEDNEWSNUM(0),i())})):i()},components:{Scroll:a["a"],FollowedList:c["a"],CommentList:r["a"]}},h=f,p=(i("addc"),i("2877")),g=Object(p["a"])(h,o,s,!1,null,"0c92422c",null);e["default"]=g.exports},addc:function(t,e,i){"use strict";var o=i("0ebd"),s=i.n(o);s.a},ed17:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"followed-list"},[t._l(t.list,(function(e,o){return i("div",{key:e.Video.videoId,staticClass:"followed-item"},[i("div",{staticClass:"top"},[i("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+e.Video.userAvatar,alt:"",width:"30",height:"30"},on:{click:function(i){return t.chooseUser(e.Video.userId)}}}),i("span",{staticClass:"name"},[t._v("@"+t._s(e.Video.userNickname))])]),i("div",{staticClass:"desc"},[t._v(t._s(e.Video.videoDesc))]),i("div",{staticClass:"video-wrap"},[i("video",{staticClass:"video",attrs:{poster:e.Video.videoCover,src:e.Video.videoPath,"webkit-playsinline":"",playsinline:"","x5-video-player-type":"h5"},on:{click:function(e){return e.target!==e.currentTarget?null:t.playHandler(e)}}})]),i("div",{staticClass:"button-bar"},[i("div",{staticClass:"like iconfont icon-heart-fill",class:{"red-heart":t.likes[o]},on:{click:function(i){return t.toggleLike(e,o)}}},[i("span",{staticClass:"likenum"},[t._v(t._s(e.WSLCNum.likeNum))])]),i("div",{staticClass:"comment iconfont icon-message",on:{click:function(i){return i.stopPropagation(),t.showCommentList(e.Video.videoId,e.WSLCNum.commentNum)}}},[i("span",{staticClass:"commentnum"},[t._v(t._s(e.WSLCNum.commentNum))])]),i("div",{staticClass:"share iconfont icon-share"},[i("span",{staticClass:"sharenum"},[t._v(t._s(e.WSLCNum.shareNum))])])]),i("div",{staticClass:"time"},[t._v(t._s(t.formatTime(e.Video.createdAt)))])])})),i("no-more",{staticClass:"no-more"})],2)},s=[],n=(i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("bd86")),a=i("d94a"),c=i("41ea"),r=i("8b55"),d=i("2f62");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={props:{list:{type:Array,required:!0}},created:function(){for(var t=this,e=function(e,i){t.$axios.get("/api/user/".concat(t.loginInfo.userId,"/isLiked/").concat(t.list[e].Video.videoId)).then((function(o){t.likes[e]=o.data.data,e===i-1&&t.$forceUpdate()}))},i=0,o=this.list.length;i<o;i++)e(i,o)},watch:{list:function(t,e){for(var i=this,o=function(t,e){i.$axios.get("/api/user/".concat(i.loginInfo.userId,"/isLiked/").concat(i.list[t].Video.videoId)).then((function(o){i.likes[t]=o.data.data,t===e-1&&i.$forceUpdate()}))},s=e.length,n=t.length;s<n;s++)o(s,n)}},data:function(){return{likes:[],baseURL:c["a"]}},computed:u({},Object(d["c"])(["loginInfo"])),methods:{showCommentList:function(t,e){this.$emit("showCommentList",t,e)},playHandler:function(t){var e=t.target;e.paused?e.play():e.pause()},toggleLike:function(t,e){var i=this;this.$axios.get("/api/user/".concat(this.loginInfo.userId,"/triggerLike/").concat(t.Video.videoId)).then((function(o){o.data.data.includes("取消")?(i.likes[e]=!1,t.WSLCNum.likeNum--):(i.likes[e]=!0,t.WSLCNum.likeNum++),i.likes=[].concat(i.likes),i.$socket.emit("sendTriggerLike",{fromUserId:i.loginInfo.userId,toUserId:t.Video.userId})}))},chooseUser:function(t){"/followed"===this.$route.path&&this.$router.push("/profile/".concat(t))},formatTime:r["d"]},components:{NoMore:a["a"]}},f=m,h=(i("1949"),i("2877")),p=Object(h["a"])(f,o,s,!1,null,"4b12de74",null);e["a"]=p.exports}}]);