(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56485fcf"],{"0e42":function(t,e,s){},"1cb8":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner7"},[s("div",{staticClass:"spinner-container container1"},[s("div",{staticClass:"circle1"}),s("div",{staticClass:"circle2"}),s("div",{staticClass:"circle3"}),s("div",{staticClass:"circle4"})]),s("div",{staticClass:"spinner-container container2"},[s("div",{staticClass:"circle1"}),s("div",{staticClass:"circle2"}),s("div",{staticClass:"circle3"}),s("div",{staticClass:"circle4"})]),s("div",{staticClass:"spinner-container container3"},[s("div",{staticClass:"circle1"}),s("div",{staticClass:"circle2"}),s("div",{staticClass:"circle3"}),s("div",{staticClass:"circle4"})])])}],a={},c=a,r=(s("6aab"),s("2877")),o=Object(r["a"])(c,i,n,!1,null,"578604de",null);e["a"]=o.exports},"3d6b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("tip",{ref:"tip"}),s("my-list",{attrs:{Title:t.title},on:{scrollToEnd:t.scrollToEnd}},[t._l(t.list,(function(e){return s("li",{key:e.userId,staticClass:"list-item",on:{click:function(s){return t.chooseUser(s,e.userId)}}},[s("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+e.userAvatar,width:"45",height:"45",alt:""}}),s("div",{staticClass:"main"},[s("p",{staticClass:"name"},[t._v(t._s(e.userNickname))]),s("p",{staticClass:"desc"},[t._v(t._s(e.userDesc))])]),"me"===t.$route.params.id?s("div",{staticClass:"btn btn-inactive",domProps:{innerHTML:t._s(e.bothStatus?"互相关注":"已关注")},on:{click:function(s){return t.triggerFollow(s.target,e)}}}):"me"!==t.$route.params.id&&"me"!==e.myRelation?s("div",{staticClass:"btn",class:["follow","both"].includes(e.myRelation)?"btn-inactive":"btn-active",domProps:{innerHTML:t._s(t.getBtnHtml(e.myRelation))},on:{click:function(s){return t.triggerFollow(s.target,e)}}}):t._e()])})),t.isLoading?s("loading"):s("no-more",{staticClass:"no-more"})],2)],1)},n=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),c=(s("6762"),s("2fdb"),s("89d4")),r=s("41ea"),o=s("3e2c"),l=s("d94a"),u=s("2f62"),d=s("1cb8");function f(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?f(Object(s),!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h=21,m={activated:function(){this.list=[],this.page=0,this.isEnd=!1,this.fetchInterestList()},data:function(){return{list:[],isLoading:!1,page:0,isEnd:!1,baseURL:r["a"],timer:null}},methods:{fetchInterestList:function(){var t=this;if(!this.isEnd){var e="me"===this.$route.params.id?this.loginInfo.userId:this.$route.params.id;this.isLoading=!0,this.page++,this.$axios.get("/api/user/".concat(e,"/Followers/page/").concat(this.page,"/").concat(this.loginInfo.userId)).then((function(e){t.isLoading=!1,e.data.data.length<h&&(t.isEnd=!0),t.list=t.list.concat(e.data.data)}))}},triggerFollow:function(t,e){var s=this;this.timer||(this.timer=setTimeout((function(){s.$axios.get("/api/user/".concat(s.loginInfo.userId,"/triggerFollow/").concat(e.userId)).then((function(i){if("me"===s.$route.params.id)i.data.data.includes("取消")?(Object(o["a"])(t,"btn-active"),t.innerText="关注",s.$refs.tip.show("取关成功")):(Object(o["c"])(t,"btn-active"),t.innerText=e.bothStatus?"互相关注":"已关注",s.$refs.tip.show("关注成功"));else if(i.data.data.includes("取消"))switch(s.$refs.tip.show("取关成功"),e.myRelation){case"follow":e.myRelation="none";break;case"both":e.myRelation="fan";break}else switch(s.$refs.tip.show("关注成功"),e.myRelation){case"fan":e.myRelation="both";break;case"none":e.myRelation="follow";break}s.$socket.emit("sendTriggerFollow",{fromUserId:s.loginInfo.userId,toUserId:e.userId}),s.timer=null})).catch((function(t){s.$refs.tip.show("网络错误"),s.timer=null}))}),300))},chooseUser:function(t,e){t.target.className.includes("btn")||this.$router.push("/profile/".concat(e))},scrollToEnd:function(){this.fetchInterestList()},getBtnHtml:function(t){switch(t){case"fan":case"none":return"关注";case"follow":return"已关注";case"both":return"互相关注"}}},computed:p({title:function(){return"me"===this.$route.params.id?"我关注的":"TA关注的"}},Object(u["c"])(["loginInfo"])),components:{MyList:c["a"],Loading:d["a"],NoMore:l["a"]}},b=m,v=(s("d25e"),s("2877")),g=Object(v["a"])(b,i,n,!1,null,"1c3a6b4a",null);e["default"]=g.exports},"424a":function(t,e,s){},"6aab":function(t,e,s){"use strict";var i=s("0e42"),n=s.n(i);n.a},"89d4":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myList"},[s("div",{staticClass:"topBar"},[s("span",{staticClass:"backbtn iconfont icon-left",on:{click:t.GoBack}}),s("p",{staticClass:"title"},[t._v(t._s(t.Title))])]),s("scroll",{staticClass:"scroll-wrap",class:{"scroll-wrap-bottom":t.needBottomMargin},attrs:{pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[s("ul",[t._t("default")],2)])],1)},n=[],a=s("e9fc"),c={props:{Title:{type:String,default:""},needBottomMargin:{type:Boolean,default:!1}},methods:{GoBack:function(){this.$router.back()},scrollToEnd:function(){this.$emit("scrollToEnd")}},components:{Scroll:a["a"]}},r=c,o=(s("cfc8"),s("2877")),l=Object(o["a"])(r,i,n,!1,null,"1aedd296",null);e["a"]=l.exports},cfc8:function(t,e,s){"use strict";var i=s("df3c"),n=s.n(i);n.a},d25e:function(t,e,s){"use strict";var i=s("424a"),n=s.n(i);n.a},df3c:function(t,e,s){}}]);